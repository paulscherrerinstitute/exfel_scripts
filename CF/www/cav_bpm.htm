<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
  <% include("include/head.inc"); %>
  <script type="text/javascript" src="js/chart.js"></script>
  <script type="text/javascript" src="js/webmap.js"></script>
  <script type="text/javascript" src="js/cav_bpm.js"></script>
</head>

<body>
<% include("include/logo.inc"); %>
<% include("include/menucbpm.inc"); %> 

<div id="window_body" >
<table class="cw" style="text-align:center">
  <tr>
    <td class="cwt" colspan="3"><% webmapGetParam("DEVICE"); %>
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top">
      <table class="t">
        <tr><td class="tt" colspan="6">
          Sampling Mode
        </td></tr>
        <tr>
          <td class="tlnb" style="width:200px">SMP-MODE</td>
        </tr>
        <tr>
          <td class="tcell">
            <select class="cav_bpm_smp_mode" name="webmap" title="OUT@<% webmapAddr("SYS_INIT","0x00000014"); %> T=uint32"></select>
          </td>
        </tr>
        <tr>
          <td class="tlnb" style="width:200px">SMP-ENA</td>
        </tr>
        <tr>
          <td class="tcell">
            <form class="forms"> 
              <input type="radio" name="webmap" title="OUT@<% webmapAddr("SYS_INIT","0x00000010"); %> T=uint32" value="0">Disable<br>
              <input type="radio" name="webmap" title="OUT@<% webmapAddr("SYS_INIT","0x00000010"); %> T=uint32" value="1">Enable
            </form>      
          </td>
        </tr>
        <tr>
          <td class="tlnb" style="width:200px">SMP-DONE</td>
        </tr>
        <tr>
          <td class="tcell" id="cav_bpm_smp_done">&nbsp;</td>
        </tr>
      </table>
      <table class="t">
        <tr>
          <td class="tt" colspan="6">
            Baseline
          </td>
        </tr>
        <tr>
          <td class="tlnb" style="width:200px">BL-ENA</td>
        </tr>
        <tr>
          <td class="tcell">
            <form class="forms">
              <input type="radio" name="webmap" title="OUT@<% webmapAddr("SYS_INIT","0x00000040"); %> T=uint32" value="0">Disable<br>
              <input type="radio" name="webmap" title="OUT@<% webmapAddr("SYS_INIT","0x00000040"); %> T=uint32" value="1">Enable
            </form>      
          </td>
        </tr>
        <tr>
          <td class="tlnb" style="width:200px">BL-SMP-EXP</td>
        </tr>
        <tr>
          <td class="tcell">
            <input  type="text" 
                    class="num_input" 
                    name="webmap" 
                    title="OUT@<% webmapAddr("SYS_INIT","0x00000044"); %> T=uint32 LO=0"
                    style="width:60px;align:center">                
          </td>
        </tr>
        <tr>
          <td class="tlnb" style="width:200px">BL-DEL [clk cyc]</td>
        </tr>
        <tr>
          <td class="tcell">
            <input  type="text" 
                    class="num_input" 
                    name="webmap" 
                    title="OUT@<% webmapAddr("SYS_INIT","0x00000048"); %> T=uint32 LO=0"
                    style="width:60px;align:center">                
          </td>
        </tr>
        <tr>
          <td>
            <table>
              <tr>
                <td class="tlnb" style="width:130px">ADC0</td>
                <td class="tcnb" name="webmap" title="INP@<% webmapAddr("SMP_ADDR_REG","0x0000006E"); %> T=int16">
                </td>
              </tr>
              <tr>
                <td class="tlnb" style="width:100px">ADC1</td>
                <td class="tcnb" name="webmap" title="INP@<% webmapAddr("SMP_ADDR_REG","0x00000072"); %> T=int16">
                </td>
              </tr>
              <tr>
                <td class="tlnb" style="width:100px">ADC2</td>
                <td class="tcnb" name="webmap" title="INP@<% webmapAddr("SMP_ADDR_REG","0x00000076"); %> T=int16">
                </td>
              </tr>
              <tr>
                <td class="tlnb" style="width:100px">ADC3</td>
                <td class="tcnb" name="webmap" title="INP@<% webmapAddr("SMP_ADDR_REG","0x0000007A"); %> T=int16">
                </td>
              </tr>
              <tr>
                <td class="tlnb" style="width:100px">ADC4</td>
                <td class="tcnb" name="webmap" title="INP@<% webmapAddr("SMP_ADDR_REG","0x0000007E"); %> T=int16">
                </td>
              </tr>
              <tr>
                <td class="tlnb" style="width:100px">ADC5</td>
                <td class="tcnb" name="webmap" title="INP@<% webmapAddr("SMP_ADDR_REG","0x00000082"); %> T=int16">
                </td>
              </tr>
            </table>
          </td>
        <tr>
      </table>
    </td>
    <td style="vertical-align:top">
      <table class="t">
        <tr><td class="tt" colspan="6">
          Interpolation
        </td></tr>
        <tr>
          <td class="tlnb" style="width:200px">AMP-TOP-R</td>
        </tr>
        <tr>
          <td class="tcell" name="webmap" title="INP@<% webmapAddr("SMP_ADDR_MEM","0x00050000"); %> T=uint32 S=2.0">
          </td>
        </tr>
        <tr>
          <td class="tlnb" style="width:200px">PH-TOP-R [deg]</td>
        </tr>
        <tr>
          <td class="tcell" name="webmap" title="INP@<% webmapAddr("SMP_ADDR_MEM","0x00048000"); %> T=int32 S=0.0009765625 P=2">
          </td>
        </tr>
      </table>
      <table class="t">
        <tr>
          <td class="tt" colspan="6">
            Cordic
          </td>
        </tr>
        <tr>
          <td class="tlnb" style="width:200px">AMP-REF-R</td>
        </tr>
        <tr>
          <td class="tcell" name="webmap" title="INP@<% webmapAddr("SMP_ADDR_MEM","0x00020000"); %> T=uint32 S=0.60716454">
          </td>
        </tr>
        <tr>
          <td class="tlnb" style="width:200px">PH-REF-R [deg]</td>
        </tr>
        <tr>
          <td class="tcell" name="webmap" title="INP@<% webmapAddr("SMP_ADDR_MEM","0x00018000"); %> T=int32 S=0.0000002384185791 P=2">
          </td>
        </tr>
        <tr>
          <td class="tlnb" style="width:200px">AMP-X-R</td>
        </tr>
        <tr>
          <td class="tcell" name="webmap" title="INP@<% webmapAddr("SMP_ADDR_MEM","0x00030000"); %> T=uint32 S=0.60716454">
          </td>
        </tr>
        <tr>
          <td class="tlnb" style="width:200px">PH-X-R [deg]</td>
        </tr>
        <tr>
          <td class="tcell" name="webmap" title="INP@<% webmapAddr("SMP_ADDR_MEM","0x00028000"); %> T=int32 S=0.0000002384185791 P=2">
          </td>
        </tr>
        <tr>
          <td class="tlnb" style="width:200px">AMP-Y-R</td>
        </tr>
        <tr>
          <td class="tcell" name="webmap" title="INP@<% webmapAddr("SMP_ADDR_MEM","0x00040000"); %> T=uint32 S=0.60716454">
          </td>
        </tr>
        <tr>
          <td class="tlnb" style="width:200px">PH-Y-R [deg]</td>
        </tr>
        <tr>
          <td class="tcell" name="webmap" title="INP@<% webmapAddr("SMP_ADDR_MEM","0x00038000"); %> T=int32 S=0.0000002384185791 P=2">
          </td>
        </tr>
      </table>
      <table class="t">
        <tr>
          <td class="tt" colspan="6" style="width:199px">
            Physical
          </td>
        </tr>
        <tr>
          <td class="tlnb" >Q [pC]</td>
          <td class="tcell"  name="webmap" title="INP@<% webmapAddr("SMP_ADDR_MEM","0x00000000"); %> T=float P=1">
        </tr>
        <tr>
          <td class="tlnb" >X [mm]</td>
          <td class="tcell"  name="webmap" title="INP@<% webmapAddr("SMP_ADDR_MEM","0x00008000"); %> T=float P=6">
        </tr>
        <tr>
          <td class="tlnb" >Y [mm]</td>
          <td class="tcell"  name="webmap" title="INP@<% webmapAddr("SMP_ADDR_MEM","0x00010000"); %> T=float P=6">
        </tr>
      </table>
    </td>
    <td>
      <table class="cw">
        <tr>
          <td colspan="2">
            <canvas id="adcData" name="webmap"  title="WAV@<% webmapAddr("SMP_ADDR_MEM","0x000D0000"); %>:<% webmapAddr("SMP_ADDR_MEM","0x000D8000"); %>:<% webmapAddr("SMP_ADDR_MEM","0x000E0000"); %>:<% webmapAddr("SMP_ADDR_MEM","0x000E8000"); %>:<% webmapAddr("SMP_ADDR_MEM","0x000F0000"); %>:<% webmapAddr("SMP_ADDR_MEM","0x000F8000"); %> T=int32 L=32 CL=32" width="600" height="500" ></canvas>
          </td>
        </tr>
      </table>	
    </td>
  </tr>
  <tr>
    <td  style="vertical-align:top" colspan="3">
      <table class="t"  >
        <tr>
          <td class="tt" colspan="6">
            Timing [clk]
          </td>
        </tr>
        <tr>
          <td>
            <table style="border-collapse:collapse">
              <tr>
                <td style="color:white;width:80px">Train trig</td>
                <td style="border-bottom:1px solid black;border-right:1px solid black;border-collapse:collapse;width:50px;height:20px"></td>
                <td style="border-top:1px solid black;border-right:1px solid black;border-collapse:collapse;width:20px"></td>
                <td style="border-bottom:1px solid black;border-collapse:collapse;width:373px">
                <input  type="text" 
                        class="num_input" 
                        name="webmap" 
                        title="OUT@<% webmapAddr("SYS_INIT","0x0000002C"); %> T=uint32 LO=0"
                        style="width:100px;align:center">      
                    
                </td>
              </tr>
            </table>

            <table style="border-collapse:collapse">
              <tr>
                <td style="color:white;width:80px"></td>
                <td style="border-right:1px dashed black;border-collapse:collapse;width:50px;height:20px"></td>
              </tr>
            </table>

            <table style="border-collapse:collapse">
              <tr>
              <td style="color:white;width:80px">Bunch trig</td>
              <td style="border-bottom:1px solid black;border-right:1px dashed black;border-collapse:collapse;width:50px;height:20px"></td>
              <td style="border-bottom:1px solid black;border-right:1px solid black;border-collapse:collapse;width:80px;height:20px;text-align:center">
                <input  type="text" 
                        class="num_input" 
                        name="webmap" 
                        title="OUT@<% webmapAddr("SYS_INIT","0x00000024"); %> T=uint32 LO=0"
                        style="width:60px;align:center">      
              </td>
              <td style="border-top:1px solid black;border-right:1px solid black;border-collapse:collapse;width:20px"></td>
              <td style="border-bottom:1px solid black;border-right:1px solid black;border-collapse:collapse;width:200px;height:20px;text-align:center">
                <input type="text" class="num_input" name="webmap" title="OUT@<% webmapAddr("SYS_INIT","0x00000028"); %> T=uint32 ">
              </td>
              <td style="border-top:1px solid black;border-right:1px solid black;border-collapse:collapse;width:20px">
              </td>
              <td style="border-bottom:1px solid black;border-collapse:collapse;width:65px"></td>
              </tr>
            </table>
            
            <table style="border-collapse:collapse">
              <tr>
                <td style="color:white;width:80px"></td>
                <td style="border-right:1px dashed black;border-collapse:collapse;width:133px;height:20px"></td>
                <td style="border-collapse:collapse;width:120px;text-align:center">
                </td>
              </tr>
            </table>
            
            <table style="border-collapse:collapse">
              <tr>
                <td style="color:white;width:80px"></td>
                <td style="border-bottom:1px solid black;border-right:1px dashed black;border-collapse:collapse;width:133px;text-align:center"></td>
                <td style="border-bottom:1px solid black;border-right:1px solid black;border-collapse:collapse;width:153px;height:20px;text-align:center"
                    name="webmap"
                    title="INP@<% webmapAddr("SMP_ADDR_REG","0x0000003C"); %> T=int32 ">
                </td>
                <td style="border-bottom:1px solid black;border-collapse:collapse;width:160px">
                  <input type="text" class="num_input" name="webmap" title="OUT@<% webmapAddr("SYS_INIT","0x00000018"); %> T=uint32 ">
                </td>
              </tr>
            </table>
            
            <table style="border-collapse:collapse">
              <tr>
                <td style="color:white;width:80px"></td>
                <td style="border-right:1px dashed black;border-collapse:collapse;width:133px;height:20px;text-align:right">
                <td style="border-right:1px dashed black;border-collapse:collapse;width:63px;height:20px;text-align:right">
                <td style="border-right:1px dashed black;border-collapse:collapse;width:87px;height:20px;text-align:center">
                  <input type="text" class="num_input" name="webmap" title="OUT@<% webmapAddr("SYS_INIT","0x00000038"); %> T=uint32" style="width:60px">
                </td>
                <td class="tlnb" style="border-collapse:collapse;width:93px;height:20px;text-align:center">bunches</td>
                <td class="tlnb" style="border-collapse:collapse;width:63px;height:20px;text-align:center">
                  <input type="text" class="num_input" name="webmap" title="OUT@<% webmapAddr("SYS_INIT","0x00000020"); %> T=uint32" style="width:60px">
                </td>
                </td>
              </tr>
            </table>
            
            <table style="border-collapse:collapse">
              <tr>
                <td style="color:white;width:80px">Sampling</td>
                <td style="border-bottom:1px solid black;border-right:1px dashed black;border-collapse:collapse;width:133px;height:20px"></td>
                <td style="border-bottom:1px solid black;border-right:1px solid black;border-collapse:collapse;width:63px;height:20px;text-align:center">
                  <input  type="text" class="num_input" name="webmap" 
                  title="OUT@<% webmapAddr("SYS_INIT","0x00000030"); %> T=uint32 "
                  style="width:40px;align:center">        
                </td>
                <td style="border-top:1px solid black;border-right:1px solid black;border-collapse:collapse;width:120px;text-align:center">
                  <input  type="text" class="num_input" name="webmap" 
                  title="OUT@<% webmapAddr("SYS_INIT","0x00000034"); %> T=uint32 LO=0 HI=255"
                  style="width:40px;align:center">        
                </td>
                <td style="border-bottom:1px solid black;border-collapse:collapse;width:127px"></td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>

</div>

<% include("include/wmfoot.inc"); %> 

<!-- Hidden readout fields used by higher layer to adjust display -->
<p>
  <span class="cav_bpm_smp_done"  name="webmap" title="INP@<% webmapAddr("SMP_ADDR_REG","0x00000007"); %> T=uint8"  style="display:none">0</span>
</p>

<script type="text/javascript">cav_bpm_init();</script>

<% include("include/foot.inc"); %> 

</body>
</html>
